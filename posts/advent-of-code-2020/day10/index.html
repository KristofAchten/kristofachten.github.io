<!doctype html><html><head><title>Day 10: Adapter Array</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/assets/css/bootstrap.min.css><link rel=stylesheet href=/assets/css/layouts/main.css><link rel=stylesheet href=/assets/css/style.css><link rel=stylesheet href=/assets/css/navigators/navbar.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><link rel=icon type=image/png href=/assets/images/favicon.png><link rel=stylesheet href=/assets/css/style.css><meta name=description content="Day 10 of AoC 2020"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/assets/css/layouts/single.css><link rel=stylesheet href=/assets/css/navigators/sidebar.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/assets/images/main-logo.png>Kristof Achten | Portfolio & Blog</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/assets/images/main-logo.png class=d-none id=main-logo>
<img src=/assets/images/inverted-logo.png class=d-none id=inverted-logo></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><input type=text placeholder=Search data-search id=search-box><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><i class="fas fa-minus-circle"></i><a class=active href>Advent of Code 2020</a><ul class=active><li><a href=/posts/advent-of-code-2020/day1/>Day 1</a></li><li><a class=active href=/posts/advent-of-code-2020/day10/>Day 10</a></li><li><a href=/posts/advent-of-code-2020/day2/>Day 2</a></li><li><a href=/posts/advent-of-code-2020/day3/>Day 3</a></li><li><a href=/posts/advent-of-code-2020/day4/>Day 4</a></li><li><a href=/posts/advent-of-code-2020/day5/>Day 5</a></li><li><a href=/posts/advent-of-code-2020/day6/>Day 6</a></li><li><a href=/posts/advent-of-code-2020/day7/>Day 7</a></li><li><a href=/posts/advent-of-code-2020/day8/>Day 8</a></li><li><a href=/posts/advent-of-code-2020/day9/>Day 9</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://kristofachten.github.io/posts/Advent%20of%20Code%202020/aoc.jpeg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/me.png><h5 class=author-name>Kristof Achten</h5><p>December 10, 2020</p></div><div class=title><h1>Day 10: Adapter Array</h1></div><div class=post-content id=post-content><h2 id=intro>Intro</h2><p>Today turned out to be one of the more difficult days thus far, but the good news is that we get to dive into a new paradigm: <a href=https://en.wikipedia.org/wiki/Dynamic_programming>Dynamic programming!</a></p><p>Our input is a list of numbers, where each number represents the output <em>joltage</em> for an adapter. Each adapter can produce this output joltage, given that its input joltage is less than 4 units lower than its output joltage.</p><pre><code>16
10
15
5
1
11
7
19
6
12
4
</code></pre><p>Other than that, the device that you&rsquo;re plugging in to has an adapter built in that produces a joltage of 3 jolts higher than the highest-rated adapter in the input-list. It is also assumed that the charging outlet that you use has an effective joltage rating of 0.</p><h2 id=solution>Solution</h2><p>As usual, we start by splitting up our input into its different lines. Since they&rsquo;re numbers, we immediately map them to longs (Int would be fine as well).
Since it will prove useful in the challenges, we&rsquo;ll immediately sort this list, and add the 0-jolt input from the charging outlet as well as the joltage of the adapter that&rsquo;s built into the device.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>var</span> input: ArrayList&lt;Long&gt; <span style=color:#66d9ef>by</span> Delegates.notNull()

<span style=color:#66d9ef>init</span> {
    <span style=color:#66d9ef>val</span> sortedInputList = rawInput.split(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>).map { <span style=color:#66d9ef>it</span>.toLong() }.sorted()

    input = arrayListOf&lt;Long&gt;(<span style=color:#ae81ff>0</span>) <span style=color:#75715e>// Charging outlet
</span><span style=color:#75715e></span>    input.addAll(sortedInputList)
    input.add(sortedInputList.max()<span style=color:#f92672>!!</span> + <span style=color:#ae81ff>3</span>) <span style=color:#75715e>// Device
</span><span style=color:#75715e></span>}
</code></pre></div><h3 id=part-1>Part 1</h3><p>The first challenge requires us to chain up all adapters in our input list, and determine the joltage differences between the devices in the chain. From these differences, we&rsquo;re supposed to multiply the amount of 1-diffs with the amount of 3-diffs.
Since our input is already sorted, this is easy as the list-class has a function that can do this for us: <code>List.zipWithNext()</code>. This function is similar to a fold-function, and could be used interchangeably.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>val</span> listOfDifs = input.zipWithNext { a, b <span style=color:#f92672>-&gt;</span> (b - a).toInt() }
</code></pre></div><p>Once we have this list of differences, simply filter out the necessary value and count the size of the remaining list. We do this for both values 1 and 3 and multiply them together:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>part1</span>(): String {
    <span style=color:#66d9ef>return</span> (listOfDifs.filter { <span style=color:#66d9ef>it</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span> }.count() * listOfDifs.filter { <span style=color:#66d9ef>it</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span> }.count()).toString()
}
</code></pre></div><h3 id=part-2>Part 2</h3><p>For part two, we&rsquo;ll need to determine the number of possible ways in which we can arrange the adapters to form a valid adapter chain. Remember that an adapter can produce its output only if the difference with its input is smaller than 4.
To solve this challenge, we can use a paradigm called dynamic programming, where we determine the value per step, save it in an array of results, and use this array for the further calculations. This has an obvious benefit over recursion, as the same calculations will only have to occur once rather than on every equivalent run.</p><p>The implemented algorithm builds on the following foundations:</p><ul><li>The amount of possible arrangements between the power outlet and the first adapter is exactly 1<ul><li>This means that we can insert the value <code>1</code> for the first two elements (being the 0 input and the first adapter) in our DP-array</li></ul></li><li>We continue down the list: at each possible element, we&rsquo;ll look back at the DP-array that we&rsquo;ve constructed while knowing the following:<ul><li>As no adapter is the same and we&rsquo;re dealing with discrete joltage-steps of 1, the possible alterations in arrangement start max 3 adapters back</li><li>For each of these three adapters, the alteration can only occur if the difference with the output-joltage of the current adapter is less than 3 (per definition)</li><li>The number of paths up to the current point is equal to the sum of the possible paths at the alteration point(s)<ul><li>This essentially means: if alteration is possible at a (set of) given adapters max 3 places back, the amount of paths at the current point is the sum of the values that we&rsquo;ve already determined for those adapters within our DP-array</li></ul></li></ul></li></ul><p>Of course, to finalize, we update our DP-array during each step with the newly found value. To know the number of possible ways that we can arrange all adapters, we simply get the last number in our DP-array.</p><p>Algorithmically, this would look something like this (note: instead of a DP-array, I went for a list-type called <code>cache</code>)</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin>  <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>part2</span>() = countPaths().toString()

  <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>countPaths</span>(): Long {
      <span style=color:#66d9ef>val</span> cache = arrayListOf&lt;Long&gt;(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>)

      <span style=color:#66d9ef>for</span> (i <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>2</span> until input.size) {
          <span style=color:#66d9ef>val</span> toAdd = listOf&lt;Int&gt;(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>).map { j <span style=color:#f92672>-&gt;</span>
              <span style=color:#66d9ef>if</span> (i &gt; j - <span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> input[i] - input[i - j] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>3</span>) cache[i - j] <span style=color:#66d9ef>else</span> <span style=color:#ae81ff>0</span>
          }.sum().toLong()

          cache.add(toAdd)
      }

      <span style=color:#66d9ef>return</span> cache[input.size - <span style=color:#ae81ff>1</span>]
  }
</code></pre></div></div><div class=btn-improve-page><a href=https://github.com/hugo-toha/hugo-toha.github.io/edit/master/content/posts/Advent%20of%20Code%202020/day10.md><i class="fas fa-code-branch"></i>Improve this page</a></div><hr><div class="row next-prev-navigator"><div class="col-md-12 next-article"><a href=/posts/advent-of-code-2020/day9/ class="btn btn-outline-info"><span>Next <i class="fas fa-chevron-circle-right"></i></span><br><span>Day 9: Encoding</span></a></div></div><hr></div></div></div></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#intro>Intro</a></li><li><a href=#solution>Solution</a><ul><li><a href=#part-1>Part 1</a></li><li><a href=#part-2>Part 2</a></li></ul></li></ul></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=#about>About</a></li><li class=nav-item><a class=smooth-scroll href=#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=#achievements>Achievements</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><span>Email:</span> <span>kristofachten@gmail.com</span></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=#><img src=/assets/images/inverted-logo.png>
Toha</a></div><div class="col-md-4 text-center">divyak Â© 2020 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/>Powered by
<img src=/assets/images/hugo-logo-wide.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/assets/js/jquery-3.4.1.min.js></script><script src=/assets/js/popper.min.js></script><script src=/assets/js/bootstrap.min.js></script><script src=/assets/js/navbar.js></script><script src=/assets/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script src=/assets/js/single.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>