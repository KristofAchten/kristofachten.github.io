<!doctype html><html><head><title>Day 9: Encoding</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/assets/css/bootstrap.min.css><link rel=stylesheet href=/assets/css/layouts/main.css><link rel=stylesheet href=/assets/css/style.css><link rel=stylesheet href=/assets/css/navigators/navbar.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><link rel=icon type=image/png href=/assets/images/favicon.png><link rel=stylesheet href=/assets/css/style.css><meta name=description content="Day 9 of AoC 2020"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/assets/css/layouts/single.css><link rel=stylesheet href=/assets/css/navigators/sidebar.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/assets/images/main-logo.png>Kristof Achten | Portfolio & Blog</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/assets/images/main-logo.png class=d-none id=main-logo>
<img src=/assets/images/inverted-logo.png class=d-none id=inverted-logo></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><input type=text placeholder=Search data-search id=search-box><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><i class="fas fa-minus-circle"></i><a class=active href>Advent of Code 2020</a><ul class=active><li><a href=/posts/advent-of-code-2020/day1/>Day 1</a></li><li><a href=/posts/advent-of-code-2020/day10/>Day 10</a></li><li><a href=/posts/advent-of-code-2020/day2/>Day 2</a></li><li><a href=/posts/advent-of-code-2020/day3/>Day 3</a></li><li><a href=/posts/advent-of-code-2020/day4/>Day 4</a></li><li><a href=/posts/advent-of-code-2020/day5/>Day 5</a></li><li><a href=/posts/advent-of-code-2020/day6/>Day 6</a></li><li><a href=/posts/advent-of-code-2020/day7/>Day 7</a></li><li><a href=/posts/advent-of-code-2020/day8/>Day 8</a></li><li><a class=active href=/posts/advent-of-code-2020/day9/>Day 9</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://kristofachten.github.io/posts/Advent%20of%20Code%202020/aoc.jpeg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/me.png><h5 class=author-name>Kristof Achten</h5><p>December 9, 2020</p></div><div class=title><h1>Day 9: Encoding</h1></div><div class=post-content id=post-content><h2 id=intro>Intro</h2><p>Another day, another puzzle! It&rsquo;s time to deal with some form of simple encryption, but they&rsquo;re keeping it pretty light.</p><p>The puzzle input is a set of data encrypted by the XMAS-protocol. This protocol starts by transmitting a preamble of 25 numbers. After that, each number you receive should be the sum of any (unique) two of the 25 immediately previous numbers.</p><h2 id=solution>Solution</h2><p>We start by splitting up our data into lines, as each line shows a number. We&rsquo;ll do something different however, and immediately map the numbers to a long-type (don&rsquo;t use integers, some numbers won&rsquo;t fit!) rather than just a string. This will be useful in further solving of the challenges.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>val</span> input = rawInput.split(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>).map { <span style=color:#66d9ef>it</span>.toLong() }
</code></pre></div><h3 id=part-1>Part 1</h3><p>Part one requires us to find the first error in the list, meaning the first number that is not a sum of any unique two of the previous 25 numbers. As you&rsquo;ll see, this is not too difficult.</p><p>We start off by running over our input. Since there is a preamble of size 25, we can ignore the first 25 numbers (as they are, per default, valid) and start at number 26. Per number, we do something similar as we did during <a href=https://kristofachten.github.io/posts/advent-of-code-2020/day1/>day 1</a> and check if the subset of the previous 25 numbers contains two other numbers that sum up to it. For this, I created a separate function which, given the subset and a number, determines if for any of the numbers in the subset, the difference with the original number is also in that subset:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>pairExists</span>(value: Long, subList: List&lt;Long&gt;) = subList.any {
	input.contains(value - <span style=color:#66d9ef>it</span>)
}
</code></pre></div><p>As soon as we find a number for which this is not true, we have found our error and can simply return it.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin>    <span style=color:#66d9ef>val</span> invalidNumber = findInvalidNumber(<span style=color:#ae81ff>25</span>)
	
    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>part1</span>() = invalidNumber.toString()

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>findInvalidNumber</span>(preambleSize: Int): Long {
        <span style=color:#66d9ef>for</span> (i <span style=color:#66d9ef>in</span> preambleSize<span style=color:#f92672>..</span>input.size) {
            <span style=color:#66d9ef>if</span> (!pairExists(input.<span style=color:#66d9ef>get</span>(i), input.subList(i - preambleSize, i))) {
                <span style=color:#66d9ef>return</span> input.<span style=color:#66d9ef>get</span>(i)
            }
        }

        <span style=color:#66d9ef>throw</span> IllegalStateException(<span style=color:#e6db74>&#34;Could not determine an invalid number!&#34;</span>)
    }

</code></pre></div><h3 id=part-2>Part 2</h3><p>Part two continuous on part one, and requires us to find the first contiguous set of numbers which sums up to the error we found. From this set, we need to return the sum of the min- and max values.</p><p>The function for this is not that difficult. We loop over the indexes of <code>input</code>, each time treating the index as the starting index for the contiguous subset, and keep on adding numbers in order until we get to a value that is bigger or equal to the one that we&rsquo;re searching. Once we get there, we check if its actually a subset with more than one element (otherwise, a set only containing our error would also be valid) and that the accumulated sum is actually equal to the error. If this is the case, we extract the sublist and determine the min- and max values through <code>.min()</code> and <code>.max()</code> calls. Add them up and return.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>part2</span>() = findContiguousSetAndSumMinMax(invalidNumber).toString()

<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>findContiguousSetAndSumMinMax</span>(invalidNumber: Long): Long {
	<span style=color:#66d9ef>for</span> (i <span style=color:#66d9ef>in</span> input.indices) {
		<span style=color:#66d9ef>var</span> sum = <span style=color:#ae81ff>0L</span>
		<span style=color:#66d9ef>var</span> curIdx = i

		<span style=color:#66d9ef>while</span> (curIdx &lt; input.size <span style=color:#f92672>&amp;&amp;</span> sum &lt; invalidNumber) {
			sum <span style=color:#f92672>+=</span> input.<span style=color:#66d9ef>get</span>(curIdx<span style=color:#f92672>++</span>)
		}

		<span style=color:#66d9ef>if</span> (i <span style=color:#f92672>!=</span> curIdx - <span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> sum <span style=color:#f92672>==</span> invalidNumber) {
			<span style=color:#66d9ef>val</span> subList = input.subList(i, curIdx - <span style=color:#ae81ff>1</span>)
			<span style=color:#66d9ef>return</span> subList.min()<span style=color:#f92672>!!</span> + subList.max()<span style=color:#f92672>!!</span>
		}
	}

	<span style=color:#66d9ef>throw</span> IllegalStateException(<span style=color:#e6db74>&#34;Could not find contiguous set!&#34;</span>)
}
</code></pre></div></div><div class=btn-improve-page><a href=https://github.com/hugo-toha/hugo-toha.github.io/edit/master/content/posts/Advent%20of%20Code%202020/day9.md><i class="fas fa-code-branch"></i>Improve this page</a></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/advent-of-code-2020/day10/ class="btn btn-outline-info"><span><i class="fas fa-chevron-circle-left"></i>Prev</span><br><span>Day 10: Adapter Array</span></a></div><div class="col-md-6 next-article"><a href=/posts/advent-of-code-2020/day8/ class="btn btn-outline-info"><span>Next <i class="fas fa-chevron-circle-right"></i></span><br><span>Day 8: Halting</span></a></div></div><hr></div></div></div></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#intro>Intro</a></li><li><a href=#solution>Solution</a><ul><li><a href=#part-1>Part 1</a></li><li><a href=#part-2>Part 2</a></li></ul></li></ul></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=#about>About</a></li><li class=nav-item><a class=smooth-scroll href=#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=#achievements>Achievements</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><span>Email:</span> <span>kristofachten@gmail.com</span></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=#><img src=/assets/images/inverted-logo.png>
Toha</a></div><div class="col-md-4 text-center">divyak © 2020 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/>Powered by
<img src=/assets/images/hugo-logo-wide.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/assets/js/jquery-3.4.1.min.js></script><script src=/assets/js/popper.min.js></script><script src=/assets/js/bootstrap.min.js></script><script src=/assets/js/navbar.js></script><script src=/assets/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script src=/assets/js/single.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>